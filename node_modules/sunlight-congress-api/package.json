{
  "name": "sunlight-congress-api",
  "version": "0.0.3",
  "author": {
    "name": "Matthew Chase Whittemore",
    "email": "mcwhittemore@gmail.com"
  },
  "description": "A simple wrapper for the Sunlight Congress API from the Sunlight Foundation",
  "contributors": [
    {
      "name": "Matthew Chase Whittemore",
      "email": "mcwhittemore@gmail.com"
    }
  ],
  "main": "./lib/main",
  "repository": {
    "type": "git",
    "url": "https://github.com/mcwhittemore/sunlight-congress-api.git"
  },
  "keywords": [
    "api",
    "congress",
    "sunlight foundation",
    "sunlight labs",
    "open government"
  ],
  "dependencies": {},
  "license": "MIT",
  "engines": {
    "node": ">=0.6"
  },
  "readme": "# Sunlight Congress API Wrapper\r\n\r\nA `node.js` wrapper for the [Sunlight Congress API](http://sunlightlabs.github.com/congress/) from the [Sunlight Foundation](http://sunlightfoundation.com/).\r\n\r\n# Installing\r\n\r\n\tnpm install sunlight-congress-api\r\n\r\n\r\n## Usage\r\n\r\n\tvar api = require(\"sunlight-congress-api\");\r\n\r\n\tvar success = function(data){\r\n\t\tconsole.log(data);\r\n\t}\r\n\r\n\tapi.init(\"SOMEAPIKEY\");\r\n\r\n\tapi.votes().filter(\"year\", \"2012\").call(success);\r\n\r\n## Demo\r\n\r\nA small demo is provided. After creating a config.js file, run `node run.js` in the demo folder to try it out.\r\n\r\n## API\r\n\r\n### Base Module\r\n\r\n#### init(apikey)\r\n\r\nSets the apikey for all endpoint modules created following.\r\n\r\n\tapi.init(\"SOMEAPIKEY\");\r\n\r\n#### clone(obj)\r\n\r\nClones whatever object it is passed into another object. Good for creating similar but different endpoint modules.\r\n\r\n\tvar votes2012 = api.votes()\r\n\t\t\t\t\t\t.filter(\"chamber\", \"house\")\r\n\t\t\t\t\t\t.filter(\"year\", \"2012\");\r\n\r\n\tvar votes2013 = api.clone(votes2012)\r\n\t\t\t\t\t\t.filter(\"year\", \"2013\");\r\n\r\n### Endpoints\r\n\r\nThere are currently 10 endpoints to the Sunlight Congress API.\r\n\r\n* bills: `bills()` provides info on legislation in the House and Senate, back to 2009. Updated daily.\r\n* bills/search: `billsSearch()` does a full text search over legislation.\r\n* committees: `committees()` lists current committees, subcommittees, and their membership.\r\n* districts/locate: `districtsLocate()` finds congressional districts for a latitude/longitude or zip.\r\n* floor_updates: `floorUpdates()` lists up-to-the-minute updates from the floor of the House and Senate.\r\n* hearings:\t`hearings()` lists committee hearings in Congress. Updated as hearings are announced.\r\n* legislators: `legislators()` brings up current legislators' names, IDs, biography, and social media.\r\n* legislators/locate: `legislatorsLocate()` finds representatives and senators for a latitude/longitude or zip.\r\n* upcoming_bills: `upcomingBills()` lists bills scheduled for debate in the future, as announced by party leadership.\r\n* votes: `votes()` provide access to roll call votes in Congress, back to 2009. Updated within minutes of votes.\r\n\r\n### Endpoint Wide Functions\r\n\r\n#### call(success, [failure])\r\n\r\nIssues a GET request to the API. Async calls success on success and failure on failure. If failure is not defined, a default console.log is used.\r\n\r\n\tapi.votes().call(function(data){ \r\n\t\tconsole.log(data.results.length);\r\n\t});\r\n\r\n* success: callback function on a successful call.\r\n* failure: callback function on a failed call. Defaults to console.log.\r\n\r\n#### explain()\r\n\r\nTurns on explain mode which add a JSON response with how the API interpreted the query, and database-specific explain information.\r\n\r\nThis is a convenience for debugging, not a \"supported\" API feature. Don't make automatic requests with explain mode turned on.\r\n\r\n\tapi.votes().explain();\r\n\r\n#### fields(field1, field2, ..., fieldN)\r\n\r\nProvides control over which fields to have Sunlight Congress API return to you. This is very helpful, as the API returns default fields only if this is not used.\r\n\r\nThis function takes any number of arguments. Each argument will be added the request string.\r\n\r\n\tapi.votes().fields(\"year\", \"chamber\") //returns the YEAR and CHAMBER fields from votes\r\n\r\n#### filter(field, value, [operator])\r\n\r\nAdds query parameter to quests. Allows for chaining.\r\n\r\n\tapi.votes().filter(\"year\", \"2012\"); // get all votes with year 2012\r\n\r\n* field: this is the field you want to filter on.\r\n* value: the value the field must eval to, to be returned.\r\n* operator: how to perform the eval. Defaults to =.\r\n\t* = - the field is equal to the value (default).\r\n\t* gt - the field is greater than this value\r\n\t* gte - the fiels is greater than or equal to this value\r\n \t* lt - the field is less than this value\r\n\t* lte - the field is less than or equal to this value\r\n\t* not - the field is not this value\r\n\t* all - the field is an array that contains all of these values (separated by \"|\")\r\n\t* in - the field is a string that is one of these values (separated by \"|\")\r\n\t* nin - the field is a string that is not one of these values (separated by \"|\")\r\n\t* exists - the field is both present and non-null (supply \"true\" or \"false\")\r\n\r\n#### getEndpoint()\r\n\r\nReturns the uri that would be called if call() was issued on the object.\r\n\r\n\tvar ep = api.districtsLocate().page(1, 10).getEndpoint();\r\n\tconsole.log(ep);\r\n\t//RESULT: http://congress.api.sunlightfoundation.com/districts/locate/?apikey=SOMEAPIKEY&per_page=10&page=1\r\n\r\n#### next(success, failure)\r\n\r\nIncrements page by 1 and then issues a call. If page has not been set it will increment it will call the first page.\r\n\r\n\tvar committees = api.committees();\r\n\tfor(var i=1; i<5; i++){\r\n\t\tcommittees.next(buildSuccess(\"COMMITTEESS PAGE \"+i));\r\n\t}\r\n\r\n* success: callback function on a successful call.\r\n* failure: callback function on a failed call. Defaults to console.log.\r\n\r\n#### order(field, [direction]) \r\n\r\nOverloaded options provided for objects and arrays, see below for examples.\r\n\r\nProvides control over the ordering of results. This is vital to pagination returns. \r\n\r\n\t//orders the result of votes by year from newest to oldest\r\n\tapi.votes().order(\"year\", \"desc\"); \r\n\r\n* field: which field to sort by.\r\n* direction: how to direct. Two options, desc and asc. Defaults to desc.\r\n\r\nIf you want to multi-order a call, use the order function twice or use one of the overloaded options.\r\n\r\n\t//orders the results by chamber from a to z and then by year from newest to oldest.\r\n\tapi.votes().order(\"chamber\", \"asc\").order(\"year\");\r\n\r\n\t//add multiple at once with a single call\r\n\tapi.votes().order([\"year\", \"desc\"], [\"chamber\", \"desc\"]);\r\n\tapi.votes().order({field:\"year\", direction:\"asc\"}, {field:\"chamber\", direction:\"asc\"});\r\n\r\n#### page(pagenumber, [pagesize])\r\n\r\nProvides control over the pages Sunlight Congress API returns to you.\r\n\r\n\tapi.votes().page(2, 5); //return page 2 of votes where the pagesize is 5 items.\r\n\r\n* pagenumber: which page to have returned.\r\n* pagesize: how many items to return on a page. Defaults to 20. Max is 50.\r\n\r\n#### search(q)\r\n\r\nProvides control over the search feature. On endpoints ending in /search, it checks that the query string is valid for full text search.\r\n\r\n\t// Senate hearings matching \"environment\"\r\n\tapi.hearings().filter(\"chamber\", \"senate\").search(\"environment\");\r\n\r\n\t//House floor updates matching \"committee of the whole\"\r\n\tapi.floorUpdates().filter(\"chamber\", \"house\").search(\"committee of the whole\");\r\n\r\n\t//Endpoints ending in /search can take multiple phrases.\r\n\t//Phrase must be wrapped in \" not '\r\n\r\n\t//Bills matching \"freedom of information\" and words starting with \"accountab\"\r\n\tapi.billsSearch.search(\"\\\"freedom of information\\\" accountab*\");\r\n\r\n\t//Bills with \"transparency\" and \"accountability\" within 5 words of each other\r\n\tapi.billsSearch.search('\"transparency accountability\"~5');\r\n\r\n* q: what to search for.\r\n\r\n#### setKey(key)\r\n\r\nSets the API key for this endpoint object only.\r\n\r\n\tapi.votes().setKey(\"SOMEAPIKEY\");\r\n\r\n### Full Text Search Endpoints\r\n\r\nEndpoints Included\r\n\r\n* billsSearch\r\n\r\n#### highlight([startTag, endTag])\r\n\r\nHighlights the text which matches the search wrapped in em tags, unless other tags are provided.\r\n\r\n\t// Bills with \"transparency\" and \"accountability\" within 5 words of each other\r\n\t// Highlighted in red\r\n\tapi.billsSearch()\r\n\t\t.search('\"transparency accountability\"~5')\r\n\t\t.highlight(\"<span style='color:red;'>\", \"</span>\");\r\n\r\n* startTag: the html tag to start the highlight. Defaults to <em>\r\n* endTag: the html tag to end the highlight. Defaults to </em>",
  "readmeFilename": "README.md",
  "_id": "sunlight-congress-api@0.0.3",
  "bundleDependencies": [],
  "dist": {
    "shasum": "959d48e45ef4bae2604ab4d5d481e954f73f2f42"
  },
  "_from": "sunlight-congress-api@",
  "_resolved": "https://registry.npmjs.org/sunlight-congress-api/-/sunlight-congress-api-0.0.3.tgz"
}
